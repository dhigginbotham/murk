var murk=function(e){return"undefined"!=typeof module&&module.exports?module.exports=e:e}(function e(t){function n(e,t,n){if("string"!=typeof t&&"undefined"==typeof n&&(n=t,t=n),n="undefined"==typeof n?!0:!1,"undefined"!=typeof t&&"string"==typeof e){if(m.model[e]=t,m.elems.hasOwnProperty(e))return o(m.elems[e])}else Object.keys(m.model).length||n?a.call(m.model,e):m.model=e;return o(),y}function r(e){return"undefined"!=typeof e?m.model.hasOwnProperty(e)?m.model[e]:null:m.model}function o(e){var t;"undefined"!=typeof e?u(e):(t=m.dom.length?m.dom:s(),Array.prototype.map.call(t,u))}function i(e){e="undefined"==typeof e?document:e;var t=s(e);Array.prototype.map.call(t,u)}function s(e){return e="undefined"==typeof e?document:e,e.getElementsByTagName("*")}function u(e){var t,n;return t=c(e),n=t(p.selectorPrefix),n&&(t(p.selectorPrefix+"-id")||t(p.selectorPrefix+"-id",p.id),t(p.selectorPrefix+"-id")==p.id&&(m.elems.hasOwnProperty(n)||(m.elems[n]=e,~m.keys.indexOf(n)||(m.keys.push(n),m.dom.push(e)),e.innerText&&(m.model[n]=e.innerText)),m.model.hasOwnProperty(n)?decodeURIComponent(t(p.selectorPrefix+"-val"))!=m.model[n]&&f(n):t(p.selectorPrefix+"-bound",!1))),!1}function f(e){m.subscribers.hasOwnProperty(e)||(m.subscribers[e]=[l]);for(var t=0;t<m.subscribers[e].length;++t)m.subscribers[e][t].call(m.elems[e],e)}function d(e,t){function n(e){m.subscribers.hasOwnProperty(e)||(m.subscribers[e]=[l]),m.subscribers[e].push(t)}if(e instanceof Array)for(var r=0;r<e.length;++r)n(e[r]);else n(e);return y}function l(e){var t=c(this);p.trackCount&&(count=t(p.selectorPrefix+"-count"),t(p.selectorPrefix+"-count",count?parseInt(count,0)+1:1)),t(p.selectorPrefix+"-val",encodeURIComponent(m.model[e])),t(p.selectorPrefix+"-bound",!0),this.innerText=m.model[e]}function c(e){return"undefined"!=typeof e?function(e,t){return"undefined"==typeof t?this.getAttribute(e):this.setAttribute(e,t)}.bind(e):null}function a(e){if("object"==typeof this)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}if(!(this instanceof e))return new e(t);var m={model:{},dom:[],elems:{},subscribers:{},keys:[]},p={selectorPrefix:"data-murk",trackCount:!0,dev:!1,id:Date.now()};t&&a.call(p,t);var y=this;return this.collectDom=i,this.emit=f,this.get=r,this.set=n,this.on=d,p.dev&&(this.state=m),this});