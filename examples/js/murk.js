var murk=function(e){return"undefined"!=typeof module&&module.exports?void(module.exports=e):e}(function(e){function t(e,t,r){if("string"!=typeof t&&"undefined"==typeof r&&(r=t,t=r),r="undefined"==typeof r?!0:!1,"undefined"!=typeof t&&"string"==typeof e){if(y.model[e]=t,y.elems.hasOwnProperty(e))return i(y.elems[e])}else r?m.call(y.model,e):y.model=e;return i(),this}function r(e){return"undefined"!=typeof e?y.model.hasOwnProperty(e)?y.model[e]:null:y.model}function i(e){var t;"undefined"!=typeof e?s(e):(t=y.dom.length?y.dom:o(),Array.prototype.forEach.call(t,s))}function n(e){e="undefined"==typeof e?document:e;var t=o(e);Array.prototype.forEach.call(t,s)}function o(e){return e="undefined"==typeof e?document:e,e.getElementsByTagName("*")}function s(e){var t,r;t=p(e),r=t(v.selectorPrefix),r&&(t(v.selectorPrefix+"-id")||t(v.selectorPrefix+"-id",v.id),t(v.selectorPrefix+"-id")==v.id&&(y.elems.hasOwnProperty(r)||(y.elems[r]=e,~y.keys.indexOf(r)||(y.keys.push(r),y.dom.push(e)),e.innerHTML&&!y.model.hasOwnProperty(r)&&(y.model[r]=e.innerHTML)),y.model.hasOwnProperty(r)?b(t(v.selectorPrefix+"-val"))!=y.model[r]&&l(r):t(v.selectorPrefix+"-bound",!1)))}function l(e){y.subscribers.hasOwnProperty(e)||(y.subscribers[e]=[h,c,f,a]);for(var t=Array.prototype.slice.call(y.subscribers[e]);fn=t.shift();)fn.call(y.elems[e],e)}function d(e,t){function r(e){y.subscribers.hasOwnProperty(e)||(y.subscribers[e]=[h,c,f,a]),y.subscribers[e].push(t)}return e instanceof Array?Array.prototype.forEach.call(e,r):r(e),this}function f(e){if(y.model[e]instanceof Array){var t=p(this);if(t(v.selectorPrefix+"-repeat"))if(this.hasChildNodes()){var r=this.childNodes.length,i=y.model[e].length;if(r>i)for(var n=i;r>n;++n)this.childNodes[n].style.display="none";Array.prototype.forEach.call(y.model[e],function(e,t){if(r>t){var i=b(this.childNodes[t].getAttribute(v.selectorPrefix+"-repeated-val"));i!=e&&(this.childNodes[t].setAttribute(v.selectorPrefix+"-repeated-val",P(e)),this.childNodes[t].innerHTML=e),this.childNodes[t].style.display="inherit"}else{var n=document.createElement(this.nodeName);n.setAttribute(v.selectorPrefix+"-repeated-val",P(e)),n.innerHTML=e,this.appendChild(n)}},this)}else{var o=document.createDocumentFragment();Array.prototype.forEach.call(y.model[e],function(e){var t=document.createElement(this.nodeName);t.setAttribute(v.selectorPrefix+"-repeated-val",P(e)),t.innerHTML=e,o.appendChild(t)},this),this.appendChild(o)}}}function a(){var e,t=p(this);v.trackCount&&(e=t(v.selectorPrefix+"-count"),t(v.selectorPrefix+"-count",e?parseInt(e,0)+1:1))}function c(e){var t,r,i;t=p(this),t&&(i=function(r){var i,n;y.filters.hasOwnProperty(r)&&y.model.hasOwnProperty(e)&&(i=t(v.selectorPrefix+"-filtered-val")?b(t(v.selectorPrefix+"-filtered-val")):null,n=y.filters[r].call(this,y.model[e]),"undefined"!=typeof n&&i!=n&&(t(v.selectorPrefix+"-filtered-val",P(n)),this.innerHTML=n))},r=t(v.selectorPrefix+"-filter"),r&&(-1!=r.indexOf(",")&&(r=r.split(",")),r instanceof Array||(r=[r]),Array.prototype.forEach.call(r,i,this)))}function u(e,t){return e&&t&&(y.filters[e]=t),this}function h(e){var t=p(this);t(v.selectorPrefix+"-val",P(y.model[e])),t(v.selectorPrefix+"-bound",!0),y.model[e]instanceof Array||(this.innerHTML=y.model[e])}function p(e){return"undefined"!=typeof e?function(e,t){return"undefined"==typeof t?this.getAttribute(e):this.setAttribute(e,t)}.bind(e):null}function m(e){if("object"==typeof this)for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}if(!(this instanceof murk))return new murk(e);var y={model:{},dom:[],elems:{},subscribers:{},filters:{},keys:[],start:Date.now()},v={selectorPrefix:"data-murk",trackCount:!0,dev:!1,id:y.start};e&&m.call(v,e);var P=encodeURIComponent,b=decodeURIComponent;return this.collectDom=n,this.emit=l,this.get=r,this.set=t,this.on=d,this.registerFilter=u,v.dev&&(this.state=y),this});